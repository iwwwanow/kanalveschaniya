### [ ] Почини критические ошибки (2-4 часа)
  - [ ] Создать ScheduleDownloadCommand класс в application/dtos/
  - [ ] Перенести resourceUrl, chatId, messageId в Command
  - [ ] Изменить execute на async execute(command: ScheduleDownloadCommand)
  - [ ] Убрать any из возвращаемого типа
### [ ] Проектирование архитектуры (1-2 часа)
### [ ] Реализация базового сценария (3-4 часа)
### [ ] Добавление обработки edge cases (2-3 часа)

# Последовательность рефакторинга Application Layer:
- [ ] 1. Исправить сигнатуру execute - убрать any, определить Command объект
- [ ] 2. Сделать зависимости приватными - убрать public readonly
- [ ] 3. Добавить асинхронность - все методы async
- [ ] 4. Определить типизированный Result - вместо any
- [ ] 5. Выбрать стратегию Use Case - один большой или разделенные
- [ ] 6. Определить границы транзакций - что атомарно, что нет
- [ ] 7. Спроектировать обработку ошибок - доменные vs системные
- [ ] 8. Определить входные DTO - Command vs Query объекты
- [ ] 9. Реализовать проверку состояния - race condition protection
- [ ] 10. Добавить доменные события - уведомления о изменениях
- [ ] 11. Проектировать композицию Use Cases - если будешь разделять
- [ ] 12. Добавить валидацию входных данных - на уровне Application

По первому вопросу (один vs несколько Use Cases):
  - Начни с ОДНОГО Use Case - ScheduleDownloadCommand
  - Разделяй только когда появится дублирование логики
  - Сфокусируйся на транзакционной целостности

 По второму вопросу (обработка ответов):
Возвращай типизированный Result с вариантами:
Уже скачан
Уже в очереди
Добавлен в очередь
Ошибка валидации

Адаптер маппит эти варианты в Telegram сообщения
Порядок работы:
Почини критические ошибки (2-4 часа)
Проектирование архитектуры (1-2 часа)
Реализация базового сценария (3-4 часа)
Добавление обработки edge cases (2-3 часа)
# Начни с минимального рабочего Use Case, затем расширяй. Не пытайся сразу сделать идеально - итеративно улучшай.

---

- не понимаю как быть с юс-кейсами
  - смотри. я могу написать один юс-кейс, который будет включать всю последовательность - и проверка наличия в репозитории и скачивание и запись в репозиторий.
  - а также могу создать для каждого этого шага собственный юс-кейс
  - хочу делать скорее по первому варианту
- на каком уровне прописывать обработку ответов?
  - юс-кейс это download-resource-use-case или process-message-use-case

- [ ] почему domain содержится в telegram-bot directory?
